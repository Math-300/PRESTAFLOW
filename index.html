<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <!-- ENHANCED VIEWPORT: Prevents accidental zoom on iOS while maintaining accessibility, adds cover fit -->
  <meta name="viewport"
    content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
  <title>PrestaFlow - Gestión de Cartera Inteligente</title>
  <link rel="icon" type="image/png" href="/favicon.png" />
  <link rel="manifest" href="/manifest.json" />

  <!-- PWA iOS METAS -->
  <meta name="theme-color" content="#f8fafc" media="(prefers-color-scheme: light)" />
  <meta name="theme-color" content="#0f172a" media="(prefers-color-scheme: dark)" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="PrestaFlow" />

  <!-- Touch Icons -->
  <link rel="apple-touch-icon" sizes="180x180" href="/icon-light.png" />

  <!-- SEO & OG -->
  <meta name="description" content="Plataforma profesional para la gestión de créditos y cobranza." />
  <meta property="og:title" content="PrestaFlow Pro" />
  <meta property="og:description" content="Gestión financiera inteligente." />
  <meta property="og:image" content="/logo-light.png" />

  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* ============================================
       PHASE 1: PHYSICS - Native Feel
       ============================================ */

    /* PREVENT RUBBER-BANDING (White bounce on edge scroll) */
    html,
    body {
      overscroll-behavior-y: none;
      overscroll-behavior-x: none;
      -webkit-tap-highlight-color: transparent;
      /* Remove grey tap highlight */
    }

    /* NATIVE SCROLL MOMENTUM on iOS */
    * {
      -webkit-overflow-scrolling: touch;
      scrollbar-width: none;
      /* Hide scrollbars Firefox */
      -ms-overflow-style: none;
      /* Hide scrollbars IE/Edge */
    }

    /* Hide scrollbars Chrome/Safari/Webkit */
    *::-webkit-scrollbar {
      display: none;
    }

    /* SYSTEM FONT STACK */
    html {
      font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text", "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Helvetica Neue", Arial, sans-serif;
    }

    /* ============================================
       CSS VARIABLES - Safe Areas & Core
       ============================================ */
    :root {
      --safe-area-top: env(safe-area-inset-top, 0px);
      --safe-area-bottom: env(safe-area-inset-bottom, 0px);
      --safe-area-left: env(safe-area-inset-left, 0px);
      --safe-area-right: env(safe-area-inset-right, 0px);
    }

    /* Full viewport stability */
    body {
      height: 100dvh;
      min-height: 100dvh;
      width: 100%;
      overflow: hidden;
      /* Prevent body scroll, handle in containers */
      background-color: #f8fafc;
      /* Match light theme color */
      user-select: none;
      /* App-like feel, disable text selection mostly */
    }

    /* Allow text selection in specific inputs */
    input,
    textarea,
    [contenteditable="true"] {
      user-select: text;
    }

    /* ============================================
       PHASE 2: GLASSMORPHISM & ESTÉTICA
       ============================================ */

    /* Glass effect utility class for headers/modals */
    .glass-effect {
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      background-color: rgba(255, 255, 255, 0.65);
      /* More translucent for iOS feel */
      border-bottom: 1px solid rgba(0, 0, 0, 0.05);
    }

    .glass-effect-dark {
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      background-color: rgba(15, 23, 42, 0.75);
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    }

    /* Smooth Transitions for Page Changes */
    .page-enter {
      opacity: 0;
      transform: translateX(20px);
    }

    .page-enter-active {
      opacity: 1;
      transform: translateX(0);
      transition: opacity 300ms, transform 300ms cubic-bezier(0.16, 1, 0.3, 1);
    }

    .page-exit {
      opacity: 1;
      transform: translateX(0);
    }

    .page-exit-active {
      opacity: 0;
      transform: translateX(-20px);
      transition: opacity 300ms, transform 300ms cubic-bezier(0.16, 1, 0.3, 1);
    }

    /* --- HIDE NUMBER SPINNERS --- */
    input::-webkit-outer-spin-button,
    input::-webkit-inner-spin-button {
      -webkit-appearance: none;
      appearance: none;
      margin: 0;
    }

    input[type=number] {
      -moz-appearance: textfield;
      appearance: textfield;
    }

    @keyframes slideInChat {
      from {
        opacity: 0;
        transform: translateY(20px) scale(0.95);
      }

      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    .animate-chat-open {
      animation: slideInChat 0.25s cubic-bezier(0.16, 1, 0.3, 1) forwards;
      transform-origin: bottom right;
    }
  </style>
  <script type="importmap">
{
  "imports": {
    "@google/genai": "https://esm.sh/@google/genai@^1.34.0",
    "@supabase/supabase-js": "https://esm.sh/@supabase/supabase-js@2",
    "react/": "https://esm.sh/react@^19.2.3/",
    "react": "https://esm.sh/react@^19.2.3",
    "react-dom/": "https://esm.sh/react-dom@^19.2.3/",
    "lucide-react": "https://esm.sh/lucide-react@^0.562.0",
    "recharts": "https://esm.sh/recharts@^3.6.0"
  }
}
</script>
</head>

<body class="bg-slate-50 text-slate-900 font-sans antialiased overflow-hidden"
  style="margin:0;padding:0;background:#0f172a;">
  <div id="root">
    <!-- Instant Loading State - Shown while JS loads, replaced when React mounts -->
    <div id="initial-loader"
      style="display:flex;align-items:center;justify-content:center;min-height:100vh;min-height:100dvh;background:linear-gradient(135deg,#0f172a 0%,#1e293b 100%);flex-direction:column;gap:1.5rem;">
      <div
        style="width:48px;height:48px;border:3px solid rgba(59,130,246,0.3);border-top-color:#3b82f6;border-radius:50%;animation:spin 0.8s linear infinite;">
      </div>
      <p
        style="color:#64748b;font-size:10px;text-transform:uppercase;letter-spacing:2px;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;">
        Cargando PrestaFlow...</p>
    </div>
  </div>
  <script type="module" src="/index.tsx"></script>
</body>

</html>